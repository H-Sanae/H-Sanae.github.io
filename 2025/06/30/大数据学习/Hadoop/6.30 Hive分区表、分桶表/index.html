<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Hive分区表、分桶表 | Tetuka的个人笔记</title><meta name="author" content="Tetuka"><meta name="copyright" content="Tetuka"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="分区表分区是将一个表或索引物理地分解为多个更小、更可管理的部分。分区对应用透明，即对访问数据库的应用而言，逻辑上讲只有一个表或一个索引（相当于应用“看到”的只是一个表或索引），但在物理上这个表或索引可能由数十个物理分区组成。 在 Hadoop 中，Hive 分区表通常以特定的目录结构来存储。每个分区对应一个独立的目录，目录名通常包含分区列的值。数据文件会存储在相应的分区目录下。 分桶表•分区提供一">
<meta property="og:type" content="article">
<meta property="og:title" content="Hive分区表、分桶表">
<meta property="og:url" content="https://h-sanae.github.io/2025/06/30/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.30%20Hive%E5%88%86%E5%8C%BA%E8%A1%A8%E3%80%81%E5%88%86%E6%A1%B6%E8%A1%A8/index.html">
<meta property="og:site_name" content="Tetuka的个人笔记">
<meta property="og:description" content="分区表分区是将一个表或索引物理地分解为多个更小、更可管理的部分。分区对应用透明，即对访问数据库的应用而言，逻辑上讲只有一个表或一个索引（相当于应用“看到”的只是一个表或索引），但在物理上这个表或索引可能由数十个物理分区组成。 在 Hadoop 中，Hive 分区表通常以特定的目录结构来存储。每个分区对应一个独立的目录，目录名通常包含分区列的值。数据文件会存储在相应的分区目录下。 分桶表•分区提供一">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://h-sanae.github.io/img/peppapig2.png">
<meta property="article:published_time" content="2025-06-30T01:04:31.937Z">
<meta property="article:modified_time" content="2025-08-16T15:20:35.411Z">
<meta property="article:author" content="Tetuka">
<meta property="article:tag" content="Hadoop">
<meta property="article:tag" content="大数据">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://h-sanae.github.io/img/peppapig2.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Hive分区表、分桶表",
  "url": "https://h-sanae.github.io/2025/06/30/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.30%20Hive%E5%88%86%E5%8C%BA%E8%A1%A8%E3%80%81%E5%88%86%E6%A1%B6%E8%A1%A8/",
  "image": "https://h-sanae.github.io/img/peppapig2.png",
  "datePublished": "2025-06-30T01:04:31.937Z",
  "dateModified": "2025-08-16T15:20:35.411Z",
  "author": [
    {
      "@type": "Person",
      "name": "Tetuka",
      "url": "https://h-sanae.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/dbb.png"><link rel="canonical" href="https://h-sanae.github.io/2025/06/30/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.30%20Hive%E5%88%86%E5%8C%BA%E8%A1%A8%E3%80%81%E5%88%86%E6%A1%B6%E8%A1%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hive分区表、分桶表',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/dbb.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-flask"></i><span> 实验室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://121.199.61.105/"><i class="fa-fw fas fa-q"></i><span> 豆瓣网开发</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fuckornot.on.websim.com/"><i class="fa-fw fa fa-trophy"></i><span> 上不上AI评分系统</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fontawesome.com/icons"><i class="fa-fw fa fa-check-circle"></i><span> font-awesome v6 图标</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/peppapig2.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/dbb.png" alt="Logo"><span class="site-name">Tetuka的个人笔记</span></a><a class="nav-page-title" href="/"><span class="site-name">Hive分区表、分桶表</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa-solid fa-flask"></i><span> 实验室</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://121.199.61.105/"><i class="fa-fw fas fa-q"></i><span> 豆瓣网开发</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fuckornot.on.websim.com/"><i class="fa-fw fa fa-trophy"></i><span> 上不上AI评分系统</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://fontawesome.com/icons"><i class="fa-fw fa fa-check-circle"></i><span> font-awesome v6 图标</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Hive分区表、分桶表</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-06-30T01:04:31.937Z" title="发表于 2025-06-30 09:04:31">2025-06-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-16T15:20:35.411Z" title="更新于 2025-08-16 23:20:35">2025-08-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h1><p>分区是将一个表或索引物理地分解为多个更小、更可管理的部分。<br>分区对应用透明，即对访问数据库的应用而言，逻辑上讲只有一个表或一个索引（相当于应用“看到”的只是一个表或索引），但在物理上这个表或索引可能由数十个物理分区组成。</p>
<p>在 Hadoop 中，Hive 分区表通常以特定的目录结构来存储。<br>每个分区对应一个独立的目录，目录名通常包含分区列的值。数据文件会存储在相应的分区目录下。</p>
<h1 id="分桶表"><a href="#分桶表" class="headerlink" title="分桶表"></a>分桶表</h1><p>•分区提供一个隔离数据和优化查询的便利方式。不过，并非所有的数据集都可形成合理的分区。对于一张表或者分区，Hive 可以进一步组织成桶，也就是更为细粒度的数据范围划分。</p>
<p>•分桶是将数据集分解成更容易管理的若干部分的另一个技术。</p>
<p>•分区针对的是数据的存储路径；分桶针对的是数据文件。</p>
<p>分桶策略：Hive的分桶采用对分桶字段的值进行哈希，然后除以桶的个数求余的方 式决定该条记录存放在哪个桶当中。</p>
<table>
<thead>
<tr>
<th></th>
<th>分区表</th>
<th>分桶表</th>
</tr>
</thead>
<tbody><tr>
<td>划分依据</td>
<td>分区列的离散值（目录分割）</td>
<td>分桶列的哈希值（文件分割）</td>
</tr>
<tr>
<td>数量灵活性</td>
<td>分区数量可动态新增</td>
<td>桶数量固定（创建时指定）</td>
</tr>
<tr>
<td>优化目标</td>
<td>减少扫描范围（过滤查询）</td>
<td>优化 Join 和抽样（哈希分片）</td>
</tr>
</tbody></table>
<h1 id="实践练习"><a href="#实践练习" class="headerlink" title="实践练习"></a>实践练习</h1><p>1.清洗excel文件 超市数据.xlsx 为文本文件，按照分区字段对文件进行拆分<br>ps: 浮点数精确小数点后2位，不需要有表头和index ，数据分隔符不能是逗号<br>数据清洗脚本：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取Excel文件</span></span><br><span class="line">df = pd.read_excel(<span class="string">&#x27;超市数据.xlsx&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建输出目录</span></span><br><span class="line">output_dir = <span class="string">&#x27;超市数据_分区&#x27;</span></span><br><span class="line">os.makedirs(output_dir, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要处理的浮点数列</span></span><br><span class="line">float_columns = [<span class="string">&#x27;销售额&#x27;</span>, <span class="string">&#x27;折扣&#x27;</span>, <span class="string">&#x27;利润&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按类别拆分并保存文件</span></span><br><span class="line"><span class="keyword">for</span> category <span class="keyword">in</span> df[<span class="string">&#x27;类别&#x27;</span>].unique():</span><br><span class="line">    <span class="comment"># 使用.loc创建显式副本</span></span><br><span class="line">    category_df = df.loc[df[<span class="string">&#x27;类别&#x27;</span>] == category].copy()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 浮点数保留两位小数（使用更安全的赋值方式）</span></span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> float_columns:</span><br><span class="line">        <span class="keyword">if</span> col <span class="keyword">in</span> category_df.columns:</span><br><span class="line">            category_df[col] = category_df[col].<span class="built_in">round</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 保存为制表符分隔的文本文件</span></span><br><span class="line">    file_path = os.path.join(output_dir, <span class="string">f&#x27;<span class="subst">&#123;category&#125;</span>.txt&#x27;</span>)</span><br><span class="line">    category_df.to_csv(file_path, sep=<span class="string">&#x27;\t&#x27;</span>, na_rep=<span class="string">&#x27;nan&#x27;</span>, header=<span class="literal">False</span>, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;数据已按类别清洗并拆分至目录: <span class="subst">&#123;output_dir&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>2.创建一个分区表，做分桶 clustered by （id ） into 2 buckets， 将文本文件分别 插入到分区中  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> supermarket_p1 (</span><br><span class="line">id string, <span class="comment">-- 行 ID  </span></span><br><span class="line">ord_id string comment <span class="string">&#x27;订单 ID&#x27;</span>,  </span><br><span class="line">ord_date string comment <span class="string">&#x27;订单日期&#x27;</span>, </span><br><span class="line">exch_date string comment <span class="string">&#x27;发货日期&#x27;</span>,</span><br><span class="line">exch_type string comment <span class="string">&#x27;邮寄方式&#x27;</span>,</span><br><span class="line">cust_id string comment <span class="string">&#x27;客户 ID &#x27;</span>,</span><br><span class="line">cust_name string comment <span class="string">&#x27;客户名称&#x27;</span>,</span><br><span class="line">d_type string comment <span class="string">&#x27;细分&#x27;</span>,</span><br><span class="line">city string comment <span class="string">&#x27;城市&#x27;</span>, </span><br><span class="line">prov string comment <span class="string">&#x27;省/自治区&#x27;</span>,  </span><br><span class="line">country string comment<span class="string">&#x27;国家&#x27;</span>,</span><br><span class="line">area string comment <span class="string">&#x27;地区&#x27;</span>, </span><br><span class="line">pro_id string comment <span class="string">&#x27;产品 ID&#x27;</span>,  </span><br><span class="line">type1 string comment <span class="string">&#x27;类别&#x27;</span>,</span><br><span class="line">type2 string comment <span class="string">&#x27;子类别&#x27;</span>, </span><br><span class="line">pro_name string comment <span class="string">&#x27;产品名称&#x27;</span>,</span><br><span class="line">sales <span class="type">float</span> comment <span class="string">&#x27;销售额&#x27;</span>,  </span><br><span class="line">count1 <span class="type">int</span> comment <span class="string">&#x27;数量  &#x27;</span>,</span><br><span class="line">discount <span class="type">float</span> comment <span class="string">&#x27;折扣  &#x27;</span>,</span><br><span class="line">profit <span class="type">float</span> comment <span class="string">&#x27;利润&#x27;</span></span><br><span class="line">)</span><br><span class="line">partitioned <span class="keyword">by</span> (c_type1 string)</span><br><span class="line">clustered <span class="keyword">by</span> (id) <span class="keyword">into</span> <span class="number">2</span> buckets</span><br><span class="line"><span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span></span><br></pre></td></tr></table></figure>

<p>上传数据到hdfs系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -<span class="built_in">mkdir</span> -p /user/hive/warehouse/supermarket/data</span><br><span class="line">hdfs dfs -put 办公用品.txt /user/hive/warehouse/supermarket/data</span><br><span class="line">hdfs dfs -put 技术.txt /user/hive/warehouse/supermarket/data</span><br><span class="line">hdfs dfs -put 家具.txt /user/hive/warehouse/supermarket/data</span><br></pre></td></tr></table></figure>

<p><strong>插入数据</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">load data inpath <span class="string">&#x27;/user/hive/warehouse/supermarket/data/办公用品.txt&#x27;</span></span><br><span class="line"><span class="keyword">into</span> <span class="keyword">table</span> supermarket_p1 <span class="keyword">partition</span> (c_type1<span class="operator">=</span><span class="string">&#x27;bgyp&#x27;</span>)</span><br><span class="line"></span><br><span class="line">load data inpath <span class="string">&#x27;/user/hive/warehouse/supermarket/data/技术.txt&#x27;</span></span><br><span class="line"><span class="keyword">into</span> <span class="keyword">table</span> supermarket_p1 <span class="keyword">partition</span> (c_type1<span class="operator">=</span><span class="string">&#x27;jishu&#x27;</span>)</span><br><span class="line"></span><br><span class="line">load data inpath <span class="string">&#x27;/user/hive/warehouse/supermarket/data/家具.txt&#x27;</span></span><br><span class="line"><span class="keyword">into</span> <span class="keyword">table</span> supermarket_p1 <span class="keyword">partition</span> (c_type1<span class="operator">=</span><span class="string">&#x27;jiajv&#x27;</span>)</span><br></pre></td></tr></table></figure>
<img src="/2025/06/30/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.30%20Hive%E5%88%86%E5%8C%BA%E8%A1%A8%E3%80%81%E5%88%86%E6%A1%B6%E8%A1%A8/file-20250630184725751.png" class="">

<p>3.创建一个 按订单时间分区的分区表 (year_ string, month_ string)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> supermarket_p2 (</span><br><span class="line">id string, <span class="comment">-- 行 ID  </span></span><br><span class="line">ord_id string comment <span class="string">&#x27;订单 ID&#x27;</span>,  </span><br><span class="line">ord_date string comment <span class="string">&#x27;订单日期&#x27;</span>, </span><br><span class="line">exch_date string comment <span class="string">&#x27;发货日期&#x27;</span>,</span><br><span class="line">exch_type string comment <span class="string">&#x27;邮寄方式&#x27;</span>,</span><br><span class="line">cust_id string comment <span class="string">&#x27;客户 ID &#x27;</span>,</span><br><span class="line">cust_name string comment <span class="string">&#x27;客户名称&#x27;</span>,</span><br><span class="line">d_type string comment <span class="string">&#x27;细分&#x27;</span>,</span><br><span class="line">city string comment <span class="string">&#x27;城市&#x27;</span>, </span><br><span class="line">prov string comment <span class="string">&#x27;省/自治区&#x27;</span>,  </span><br><span class="line">country string comment<span class="string">&#x27;国家&#x27;</span>,</span><br><span class="line">area string comment <span class="string">&#x27;地区&#x27;</span>, </span><br><span class="line">pro_id string comment <span class="string">&#x27;产品 ID&#x27;</span>,  </span><br><span class="line">type1 string comment <span class="string">&#x27;类别&#x27;</span>,</span><br><span class="line">type2 string comment <span class="string">&#x27;子类别&#x27;</span>, </span><br><span class="line">pro_name string comment <span class="string">&#x27;产品名称&#x27;</span>,</span><br><span class="line">sales <span class="type">float</span> comment <span class="string">&#x27;销售额&#x27;</span>,  </span><br><span class="line">count1 <span class="type">int</span> comment <span class="string">&#x27;数量  &#x27;</span>,</span><br><span class="line">discount <span class="type">float</span> comment <span class="string">&#x27;折扣  &#x27;</span>,</span><br><span class="line">profit <span class="type">float</span> comment <span class="string">&#x27;利润&#x27;</span></span><br><span class="line">)</span><br><span class="line">partitioned <span class="keyword">by</span> (year_ string, month_ string)</span><br><span class="line"><span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>动态分区配置</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--开启动态分区(默认开启)</span></span><br><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition<span class="operator">=</span><span class="literal">true</span></span><br><span class="line"><span class="comment">--指定非严格模式 nonstrict模式表示允许所有的分区字段都可以使用动态分区</span></span><br><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition.mode<span class="operator">=</span>nonstrict</span><br><span class="line"><span class="comment">--在所有执行MR的节点上，最大一共可以创建多少个动态分区。默认1000</span></span><br><span class="line"><span class="keyword">set</span> hive.exec.max.dynamic.partitions<span class="operator">=</span><span class="number">1000</span></span><br><span class="line"><span class="comment">--在每个执行MR的节点上，最大可以创建多少个动态分区(分区字段有多少种设多少个)</span></span><br><span class="line"><span class="keyword">set</span> hive.exec.max.dynamic.partitions.pernode<span class="operator">=</span><span class="number">100</span></span><br><span class="line"><span class="comment">--整个MR Job中，最大可以创建多少个HDFS文件。默认100000</span></span><br><span class="line"><span class="keyword">set</span> hive.exec.max.created.files<span class="operator">=</span><span class="number">100000</span></span><br><span class="line"><span class="comment">--当有空分区生成时，是否抛出异常</span></span><br><span class="line"><span class="keyword">set</span> hive.error.on.empty.partition<span class="operator">=</span><span class="literal">false</span></span><br><span class="line"><span class="comment">--打开正则查询模式`(dt|hr)?+.+`</span></span><br><span class="line"><span class="keyword">set</span> hive.support.quoted.identifiers<span class="operator">=</span><span class="keyword">none</span></span><br></pre></td></tr></table></figure>

<p>4.将第二部的数据 使用动态分区的方法 导入到 第三步的表中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> supermarket_p2 <span class="keyword">partition</span> (year_,month_)</span><br><span class="line"><span class="keyword">select</span> p1.<span class="operator">*</span>,date_format(ord_date,&quot;yyyy&quot;),date_format(ord_date,&quot;MM&quot;)</span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> `(c_type1)?<span class="operator">+</span>.<span class="operator">+</span>` <span class="keyword">from</span> supermarket_p1) p1</span><br></pre></td></tr></table></figure>
<img src="/2025/06/30/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.30%20Hive%E5%88%86%E5%8C%BA%E8%A1%A8%E3%80%81%E5%88%86%E6%A1%B6%E8%A1%A8/file-20250630184637044.png" class=""></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hadoop/">Hadoop</a><a class="post-meta__tags" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a></div><div class="post-share"><div class="social-share" data-image="/img/peppapig2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/06/24/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.24%20Hadoop%E9%83%A8%E7%BD%B2/" title="6.24 Hadoop部署"><img class="cover" src="/img/peppapig3.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-24</div><div class="info-item-2">6.24 Hadoop部署</div></div><div class="info-2"><div class="info-item-1">Hadoop简介 Hadoop是一个由Apache基金会所开发的分布式系统基础架构 主要解决，海量数据的存储和海量数据的分析计算问题 广义上来说，Hadoop通常是指一个更广泛的概念-Hadoop生态圈  分布式存储Hadoop 的分布式存储主要基于 HDFS（分布式文件系统）:HDFS将数据分割成多个数据块（block），这些数据块分散存储在集群中的不同节点上。每个数据块会有多个副本，通常默认是 3 个副本.采用分布式存储在不同的节点上，提高了数据的可靠性和容错性。 Hadoop的分布式核心组件是MapReduce编程模型:在MapReduce任务中，数据被切分为多个任务，每个任务由或多个节点并行。每个节点负责将输入数据映射为键-值对生成中间结果。最后，中间结果按照键的排序进行合并和归并。 Hadoop组件HDFSHDFS组件用于存储数据,主要由NameNode,DataNode,SecondaryNameNode 组成  NameNode (nn): 存储文件的元数据，如文件名，文件目录结构，文件属性 (生成时间、副本数、文件权限)，以及每个文件的块列表和块所在的DataNo...</div></div></div></a><a class="pagination-related" href="/2025/06/27/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.27%20Hive%E5%A4%8D%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%81%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0/" title="Hive复合数据类型、相关函数"><img class="cover" src="/img/peppapig4.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-27</div><div class="info-item-2">Hive复合数据类型、相关函数</div></div><div class="info-2"><div class="info-item-1">Hive复合数据类型通过以下三种复合类型，Hive 能够高效处理半结构化数据（如日志、JSON），避免频繁进行表连接操作 array 数组array&lt;value数据类型&gt;存储同类型元素的有序集合，元素通过索引访问（从 0 开始） 12345--查询复合数据select  a_score[0] from student2--构造复合数据-arrayselect array(值,值) from student struct 集合struct&lt;key值:value数据类型,key值:value数据类型&gt;存储不同类型字段的集合，每个字段有名称和类型，通过点号（.）访问 12345--查询复合数据select  s_score.chinese from student2--构造复合数据select named_struct(key,value,key,value) from student map 字典map&lt;key数据类型,value数据类型&gt;存储键值对（Key-Value）集合，键必须唯一，通过键访问值 12345--查询复合数据select  m_...</div></div></div></a><a class="pagination-related" href="/2025/07/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/7.7%20hadoop%E9%97%AE%E7%AD%94/" title="hadoop问答"><img class="cover" src="/img/peppapig2.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-07</div><div class="info-item-2">hadoop问答</div></div><div class="info-2"><div class="info-item-1">1. hadoop组件有哪些?分别有什么功能   组件 功能    HDFS 分布式文件存储系统，提供高容错性海量存储   MapReduce 分布式计算框架，并行处理大数据集   YARN 资源调度系统，管理集群资源并分配任务   Hive 主要用于处理结构化和半结构化数据   Common 通用工具库，支持其他模块   2. 分布式存储的组件是什么 ?有哪些进程? 进程的作用是什么?分布式存储组件是 HDFS，其包含的进程及作用如下：    进程 作用    NameNode 管理元数据（文件名、块位置、权限），响应客户端请求   DataNode 存储实际数据块，定期向NN发送心跳和块报告   SecondaryNameNode 定期合并FsImage和Edits日志（非热备，缓解NN压力）   3. 资源调度使用什么组件? 该组件有哪些进程?每个进程的作用是什么?资源调度使用的组件是 YARN，相关进程及作用如下：    进程 作用    ResourceManager 负责全局资源的调度和分配   NodeManager 管理单个节点上的资源和容器   Applicat...</div></div></div></a><a class="pagination-related" href="/2025/08/04/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/%E9%A1%B9%E7%9B%AE/8.4%20%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E3%80%81%E5%90%88%E5%B9%B6%EF%BC%88SparkSQL%EF%BC%89/" title="医药项目：数据清洗、合并"><img class="cover" src="/img/peppapig8.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-04</div><div class="info-item-2">医药项目：数据清洗、合并</div></div><div class="info-2"><div class="info-item-1">SparkSQLSpark SQL 是 Apache Spark 生态系统中的一个核心模块，专门用于处理结构化数据。它为用户提供了使用 SQL 语句或 DataFrame API 来查询和操作数据的能力，极大地简化了大数据分析任务的开发流程。 一、Spark SQL 的核心特点 统一的数据访问方式Spark SQL 支持从多种数据源读取数据，包括：  JSON、Parquet、ORC、CSV 等文件格式 JDBC&#x2F;ODBC 接口连接传统数据库（如 MySQL、PostgreSQL） Hive 表（通过 HiveContext） Kafka 流数据（结合 Structured Streaming）   SQL 支持用户可以直接使用标准 SQL 查询数据，例如： 1SELECT name, age FROM people WHERE age &gt; 30 这使得熟悉 SQL 的数据分析师可以轻松上手。  DataFrame 和 Dataset APISpark SQL 提供了高层次的抽象：  DataFrame：以结构化方式组织的分布式数据集，类似于传统数据库中的表或 P...</div></div></div></a><a class="pagination-related" href="/2025/06/25/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/6.25%20Hive%E5%AE%89%E8%A3%85%E3%80%81%E9%85%8D%E7%BD%AEbeeline/" title="6.25 Hive安装、配置beeline"><img class="cover" src="/img/peppapig8.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-25</div><div class="info-item-2">6.25 Hive安装、配置beeline</div></div><div class="info-2"><div class="info-item-1">安装mysql12345678910111213141516#下载安装源wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm# 安装 mysql 源yum localinstall mysql57-community-release-el7-11.noarch.rpm# 导入keyrpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022# 修改国内源vim /etc/yum.repos.d/mysql-community.repo修改 baseurl 为 https://mirrors.cloud.tencent.com/mysql/yum/mysql-5.7-community-el7-x86_64/#安装mysqlyum install -y mysql-community-server  安装Hive12345678910111213#解压apache-hive-3.1.2-bin.tar.gz到/opt/module/...</div></div></div></a><a class="pagination-related" href="/2025/07/02/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Hadoop/7.2%20%E7%BD%91%E7%AB%99%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E6%B8%85%E6%B4%97%E5%B9%B6%E4%B8%8A%E4%BC%A0%E5%88%B0hive%E6%95%B0%E6%8D%AE%E5%BA%93/" title="网站日志文件清洗并上传到hive数据库"><img class="cover" src="/img/peppapig3.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-02</div><div class="info-item-2">网站日志文件清洗并上传到hive数据库</div></div><div class="info-2"><div class="info-item-1">相关总结一、参数接收与文件校验1. 用户输入获取从命令行接收日期参数（格式：yyyymmdd） 1234dt = input(&quot;请输入参数: &quot;)if not dt:    print(&quot;请输入参数（格式：yyyymmdd）&quot;)    exit() 2. 参数格式验证检查输入是否符合 8 位纯数字格式 12345678def test_value(dt, fpath):        if len(dt) == 8 and dt.isdigit():            fname = f&quot;&#123;dt[0:4]&#125;-&#123;dt[4:6]&#125;-&#123;dt[6:8]&#125;.log&quot;            fnamein = f&#x27;&#123;fpath&#125;/&#123;fname&#125;&#x27;            return fname, fnamein        else:            print(&quot;输入参数格式不对: yyyy...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/dbb.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Tetuka</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">70</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/H-Sanae/H-Sanae.github.io" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1466753498@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E8%A1%A8"><span class="toc-text">分区表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E6%A1%B6%E8%A1%A8"><span class="toc-text">分桶表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B5%E7%BB%83%E4%B9%A0"><span class="toc-text">实践练习</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/08/25/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/%E5%85%B6%E4%BB%96%E6%9D%82%E9%A1%B9/cursor%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" title="cursor使用笔记"><img src="/img/peppapig6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cursor使用笔记"/></a><div class="content"><a class="title" href="/2025/08/25/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/%E5%85%B6%E4%BB%96%E6%9D%82%E9%A1%B9/cursor%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/" title="cursor使用笔记">cursor使用笔记</a><time datetime="2025-08-25T15:53:21.868Z" title="更新于 2025-08-25 23:53:21">2025-08-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/20/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/SQL/8.20%20sql%E9%A2%98%E5%A4%8D%E7%9B%98/" title="8.20 sql题复盘"><img src="/img/peppapig3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="8.20 sql题复盘"/></a><div class="content"><a class="title" href="/2025/08/20/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/SQL/8.20%20sql%E9%A2%98%E5%A4%8D%E7%9B%98/" title="8.20 sql题复盘">8.20 sql题复盘</a><time datetime="2025-08-21T01:06:06.917Z" title="更新于 2025-08-21 09:06:06">2025-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/16/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Python/request%E5%92%8Cselenium%EF%BC%88Python%E7%88%AC%E8%99%AB%EF%BC%89/" title="request和selenium（Python爬虫）"><img src="/img/peppapig8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="request和selenium（Python爬虫）"/></a><div class="content"><a class="title" href="/2025/08/16/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0/Python/request%E5%92%8Cselenium%EF%BC%88Python%E7%88%AC%E8%99%AB%EF%BC%89/" title="request和selenium（Python爬虫）">request和selenium（Python爬虫）</a><time datetime="2025-08-20T06:38:16.201Z" title="更新于 2025-08-20 14:38:16">2025-08-20</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/peppapig2.png);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By Tetuka</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.0-b2</a></span></div><div class="footer_custom_text">感谢阅读</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="输入以搜索内容..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>